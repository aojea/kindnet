<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>CNI | Kindnet</title>
<meta name=description content="CNI-kindnet Kubernetes container runtimes relies on the Container Network Interface (CNI) standard to manage Pod networking. While CNI provides a general framework for container networking, its full feature set isn’t necessary for Kubernetes environments. This presents an opportunity for optimization.
At its core, Kubernetes has two primary networking requirements for CNI:
IP Address Management (IPAM): Assign IP addresses to Pods. Interface Configuration: Create and configure network interfaces within Pods. Many CNI plugins, however, are designed for more complex scenarios beyond Kubernetes’ needs."><meta property="og:url" content="https://kindnet.es/docs/design/cni/"><meta property="og:site_name" content="Kindnet"><meta property="og:title" content="CNI"><meta property="og:description" content="CNI-kindnet Kubernetes container runtimes relies on the Container Network Interface (CNI) standard to manage Pod networking. While CNI provides a general framework for container networking, its full feature set isn’t necessary for Kubernetes environments. This presents an opportunity for optimization.
At its core, Kubernetes has two primary networking requirements for CNI:
IP Address Management (IPAM): Assign IP addresses to Pods. Interface Configuration: Create and configure network interfaces within Pods. Many CNI plugins, however, are designed for more complex scenarios beyond Kubernetes’ needs."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:published_time" content="2024-12-26T22:54:48+00:00"><meta property="article:modified_time" content="2024-12-26T22:54:48+00:00"><meta itemprop=name content="CNI"><meta itemprop=description content="CNI-kindnet Kubernetes container runtimes relies on the Container Network Interface (CNI) standard to manage Pod networking. While CNI provides a general framework for container networking, its full feature set isn&rsquo;t necessary for Kubernetes environments. This presents an opportunity for optimization.
At its core, Kubernetes has two primary networking requirements for CNI:
IP Address Management (IPAM): Assign IP addresses to Pods. Interface Configuration: Create and configure network interfaces within Pods. Many CNI plugins, however, are designed for more complex scenarios beyond Kubernetes&rsquo; needs."><meta itemprop=datePublished content="2024-12-26T22:54:48+00:00"><meta itemprop=dateModified content="2024-12-26T22:54:48+00:00"><meta itemprop=wordCount content="628"><meta name=twitter:card content="summary"><meta name=twitter:title content="CNI"><meta name=twitter:description content="CNI-kindnet Kubernetes container runtimes relies on the Container Network Interface (CNI) standard to manage Pod networking. While CNI provides a general framework for container networking, its full feature set isn&rsquo;t necessary for Kubernetes environments. This presents an opportunity for optimization.
At its core, Kubernetes has two primary networking requirements for CNI:
IP Address Management (IPAM): Assign IP addresses to Pods. Interface Configuration: Create and configure network interfaces within Pods. Many CNI plugins, however, are designed for more complex scenarios beyond Kubernetes&rsquo; needs."><link rel=preload href=/scss/main.min.5e43f8574351718e9b44966c9f3a571202ed048c082f457fb574c10b1a1bc56c.css as=style integrity="sha256-XkP4V0NRcY6bRJZsnzpXEgLtBIwIL0V/tXTBCxobxWw=" crossorigin=anonymous><link href=/scss/main.min.5e43f8574351718e9b44966c9f3a571202ed048c082f457fb574c10b1a1bc56c.css rel=stylesheet integrity="sha256-XkP4V0NRcY6bRJZsnzpXEgLtBIwIL0V/tXTBCxobxWw=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-TP7BW08VCW"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-TP7BW08VCW")}</script></head><body class=td-page><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>Kindnet</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/docs><span>Home</span></a></li><li class=nav-item><a class=nav-link href=/docs/user><span>User Guides</span></a></li><li class=nav-item><a class=nav-link href=/docs/design><span>Design</span></a></li><li class=nav-item><a class=nav-link href=/docs/contributing><span>Contributing</span></a></li></ul></div><div class="d-none d-lg-block"></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Kindnet</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsquick-start-li><a href=/docs/quick-start/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsquick-start><span>Quick Start</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsuser-li><a href=/docs/user/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsuser><span>User Guides</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuserconfiguration-li><a href=/docs/user/configuration/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuserconfiguration><span>Configuration Options</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsusernetwork-policies-li><a href=/docs/user/network-policies/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsusernetwork-policies><span>Network Policies</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuserfastpath-li><a href=/docs/user/fastpath/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuserfastpath><span>Fastpath</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsusermasquerade-li><a href=/docs/user/masquerade/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsusermasquerade><span>Masquerading</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuserdnscache-li><a href=/docs/user/dnscache/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuserdnscache><span>DNS cache</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsusernat64-li><a href=/docs/user/nat64/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsusernat64><span>NAT64</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsdesign-li><a href=/docs/design/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsdesign><span>Design</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docsdesigncni-li><a href=/docs/design/cni/ class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id=m-docsdesigncni><span class=td-sidebar-nav-active-item>CNI</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdesignkindnet-li><a href=/docs/design/kindnet/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdesignkindnet><span>Kindnet</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscontributing-li><a href=/docs/contributing/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributing><span>Contributing</span></a></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"><a href=https://github.com/aojea/kindnet/tree/main/site/content/docs/design/cni/index.md class="td-page-meta--view td-page-meta__view" target=_blank rel=noopener><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
<a href=https://github.com/aojea/kindnet/edit/main/site/content/docs/design/cni/index.md class="td-page-meta--edit td-page-meta__edit" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
<a href="https://github.com/aojea/kindnet/new/main/site/content/docs/design/cni?filename=change-me.md&amp;value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class="td-page-meta--child td-page-meta__child" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
<a href="https://github.com/aojea/kindnet/issues/new?title=CNI" class="td-page-meta--issue td-page-meta__issue" target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#cni-kindnet>CNI-kindnet</a><ul><li><a href=#portmaps--hostports>Portmaps / HostPorts</a></li><li><a href=#configuration>Configuration</a></li><li><a href=#database-design>Database Design</a></li></ul></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/docs/>Kindnet</a></li><li class=breadcrumb-item><a href=/docs/design/>Design</a></li><li class="breadcrumb-item active" aria-current=page>CNI</li></ol></nav><div class=td-content><h1>CNI</h1><header class=article-meta></header><h2 id=cni-kindnet>CNI-kindnet</h2><p>Kubernetes container runtimes relies on the Container Network Interface (CNI) standard to manage Pod networking. While CNI provides a general framework for container networking, its full feature set isn&rsquo;t necessary for Kubernetes environments. This presents an opportunity for optimization.</p><p>At its core, Kubernetes has two primary networking requirements for CNI:</p><ul><li><strong>IP Address Management (IPAM):</strong> Assign IP addresses to Pods.</li><li><strong>Interface Configuration:</strong> Create and configure network interfaces within Pods.</li></ul><p>Many CNI plugins, however, are designed for more complex scenarios beyond Kubernetes&rsquo; needs. This can lead to unnecessary overhead and complexity.</p><p><strong>NOTE</strong> Usually the &ldquo;CNI plugin&rdquo; term is used to refer to &ldquo;Kubernetes network plugins&rdquo;, that offer more networking capabilities, like Services, Network Policies, &mldr; <code>kindnet</code> is a Network Plugin that uses cni-kindnet to assign IP to Pods and create its interfaces.</p><p>Traditional CNI plugins often rely on in-memory data structures or external daemon processes to manage network state. This can introduce challenges:</p><ul><li><p><strong>Process Dependencies:</strong> Relying on daemons creates extra dependencies. If a daemon crashes or fails to restart correctly, it can disrupt network operations and complicate recovery.</p></li><li><p><strong>Reconciliation Overhead:</strong> Maintaining consistency between in-memory state and the actual network configuration requires complex reconciliation loops, which can consume resources and introduce delays.</p></li></ul><p><code>cni-kindnet</code> leverages SQLite3, a lightweight database, to maintain state and streamline operations. This eliminates the need for external daemons or complex chaining, resulting in a more efficient and reliable plugin.</p><h3 id=portmaps--hostports>Portmaps / HostPorts</h3><p><code>cni-kindnet</code> also implements the Kubernetes&rsquo; hostPort feature. This feature allows you to map a port on the host machine directly to a port on a Pod, making the Pod accessible from outside the cluster network.</p><h3 id=configuration>Configuration</h3><p>The CNI configuration file only expect the <code>ranges</code> field to be populated with the ranges used to provide IP addresses to the Pods. <code>kindnetd</code> obtains those ranges from the <code>node.Spec.PodCIDRs</code> field, but the design of the CNI allows to add additional ranges, useful for environments that require to extend the number of available IPs on the Nodes.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  &#34;cniVersion&#34;: <span style=color:#a31515>&#34;0.4.0&#34;</span>,
</span></span><span style=display:flex><span>  &#34;name&#34;: <span style=color:#a31515>&#34;kindnet&#34;</span>,
</span></span><span style=display:flex><span>  &#34;plugins&#34;: [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      &#34;type&#34;: <span style=color:#a31515>&#34;cni-kindnet&#34;</span>,
</span></span><span style=display:flex><span>      &#34;ranges&#34;: [
</span></span><span style=display:flex><span>        <span style=color:#a31515>&#34;10.244.2.0/24&#34;</span>
</span></span><span style=display:flex><span>      ],
</span></span><span style=display:flex><span>      &#34;capabilities&#34;: {&#34;portMappings&#34;: <span style=color:#00f>true</span>}
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=database-design>Database Design</h3><p><a href=https://mermaid.live/edit#pako:eNqVU01rwzAM_StB5_Y2dsitsB12KAx2GwGjxWpqqD-Q5Y3S5r_PaZaka7LCfLLfe3qWJfkEtdcEJRA_GWwYbeWKvILXsTif1-vzKe9ZLAZFTthQLMqi9k7QuNhrTUCrGF2TuXYI0Z2ugpfXzbaCK89Tv-9WzHauGcyIldEz0qGlRTAGrOdMWrIgGTK9Qk1QqDVTjOrzYYltUOgLj3-wY-zj3dgF1gnxLueuFp820VZSz7bzKs-LGNNHfucM1hRrNkGMd7_Mblv6z67sfRRlwoTntHuwM57JA3vxtT_cu-TGbGImxxZWYIktGp0H9pJyBbKnXEboZk3TDtNBunHrpJjEvx1dDaVwohWkoHNbfqYcyh0e4og-ayOeR5Aux23_My4fZAXsU7MfFQHdu_eDTfsNPzwQ8A><img src="https://mermaid.ink/img/pako:eNqVU01rwzAM_StB5_Y2dsitsB12KAx2GwGjxWpqqD-Q5Y3S5r_PaZaka7LCfLLfe3qWJfkEtdcEJRA_GWwYbeWKvILXsTif1-vzKe9ZLAZFTthQLMqi9k7QuNhrTUCrGF2TuXYI0Z2ugpfXzbaCK89Tv-9WzHauGcyIldEz0qGlRTAGrOdMWrIgGTK9Qk1QqDVTjOrzYYltUOgLj3-wY-zj3dgF1gnxLueuFp820VZSz7bzKs-LGNNHfucM1hRrNkGMd7_Mblv6z67sfRRlwoTntHuwM57JA3vxtT_cu-TGbGImxxZWYIktGp0H9pJyBbKnXEboZk3TDtNBunHrpJjEvx1dDaVwohWkoHNbfqYcyh0e4og-ayOeR5Aux23_My4fZAXsU7MfFQHdu_eDTfsNPzwQ8A?type=png" alt></a></p><p>There are three tables required to store the existing state of the Node.</p><ul><li><code>ipam_ranges</code> table, contain the IP ranges used to provide IPs to Pods:</li></ul><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#00f>CREATE</span> <span style=color:#00f>TABLE</span> <span style=color:#00f>IF</span> <span style=color:#00f>NOT</span> <span style=color:#00f>EXISTS</span> ipam_ranges (
</span></span><span style=display:flex><span>  id INTEGER <span style=color:#00f>PRIMARY</span> <span style=color:#00f>KEY</span> AUTOINCREMENT, <span style=color:green>-- Unique identifier for the IP range
</span></span></span><span style=display:flex><span><span style=color:green></span>  subnet TEXT <span style=color:#00f>NOT</span> <span style=color:#00f>NULL</span>,                 <span style=color:green>-- Subnet in CIDR notation (e.g., &#34;10.244.0.0/16&#34;)
</span></span></span><span style=display:flex><span><span style=color:green></span>  description TEXT                      <span style=color:green>-- Optional description of the IP range
</span></span></span><span style=display:flex><span><span style=color:green></span>);
</span></span></code></pre></div><ul><li><code>pods</code> table, store all the Pods information:</li></ul><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#00f>CREATE</span> <span style=color:#00f>TABLE</span> <span style=color:#00f>IF</span> <span style=color:#00f>NOT</span> <span style=color:#00f>EXISTS</span> pods (
</span></span><span style=display:flex><span>  container_id TEXT <span style=color:#00f>PRIMARY</span> <span style=color:#00f>KEY</span>,     <span style=color:green>-- ID of the pod Sandbox on the container runtime
</span></span></span><span style=display:flex><span><span style=color:green></span>  name TEXT,                <span style=color:green>-- Kubernetes name of the pod
</span></span></span><span style=display:flex><span><span style=color:green></span>  namespace TEXT,           <span style=color:green>-- Kubernetes namespace of the pod
</span></span></span><span style=display:flex><span><span style=color:green></span>  uid TEXT,          			  <span style=color:green>-- Kubernetes UID of the pod
</span></span></span><span style=display:flex><span><span style=color:green></span>  netns TEXT <span style=color:#00f>NOT</span> <span style=color:#00f>NULL</span>,      <span style=color:green>-- Network namespace path of the pod
</span></span></span><span style=display:flex><span><span style=color:green></span>  ip_address_v4 TEXT,       <span style=color:green>-- IPv4 address assigned to the pod
</span></span></span><span style=display:flex><span><span style=color:green></span>  ip_address_v6 TEXT,       <span style=color:green>-- IPv6 address assigned to the pod
</span></span></span><span style=display:flex><span><span style=color:green></span>  ip_gateway_v4 TEXT,       <span style=color:green>-- IPv4 gateway assigned to the pod
</span></span></span><span style=display:flex><span><span style=color:green></span>  ip_gateway_v6 TEXT,       <span style=color:green>-- IPv6 gateway assigned to the pod
</span></span></span><span style=display:flex><span><span style=color:green></span>  interface_name TEXT <span style=color:#00f>NOT</span> <span style=color:#00f>NULL</span>,      <span style=color:green>-- Name of the network interface of the pod in the host
</span></span></span><span style=display:flex><span><span style=color:green></span>  interface_mtu INTEGER,             <span style=color:green>-- Interface mtu
</span></span></span><span style=display:flex><span><span style=color:green></span>  creation_timestamp DATETIME <span style=color:#00f>DEFAULT</span> <span style=color:#00f>CURRENT_TIMESTAMP</span>, <span style=color:green>-- Timestamp of pod creation
</span></span></span><span style=display:flex><span><span style=color:green></span>  <span style=color:#00f>UNIQUE</span> (ip_address_v4),           <span style=color:green>-- Unique constraint for IPv4 address
</span></span></span><span style=display:flex><span><span style=color:green></span>  <span style=color:#00f>UNIQUE</span> (ip_address_v6)            <span style=color:green>-- Unique constraint for IPv6 address
</span></span></span><span style=display:flex><span><span style=color:green></span>);
</span></span></code></pre></div><ul><li><code>portmap_entries</code> table, entries will be automatically deleted once the associated Pod is deleted from the <code>pods</code> table.</li></ul><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#00f>CREATE</span> <span style=color:#00f>TABLE</span> <span style=color:#00f>IF</span> <span style=color:#00f>NOT</span> <span style=color:#00f>EXISTS</span> portmap_entries (
</span></span><span style=display:flex><span>    id INTEGER <span style=color:#00f>PRIMARY</span> <span style=color:#00f>KEY</span> AUTOINCREMENT,
</span></span><span style=display:flex><span>    container_id TEXT <span style=color:#00f>NOT</span> <span style=color:#00f>NULL</span>,
</span></span><span style=display:flex><span>    host_ip TEXT <span style=color:#00f>NOT</span> <span style=color:#00f>NULL</span>,
</span></span><span style=display:flex><span>    host_port INTEGER <span style=color:#00f>NOT</span> <span style=color:#00f>NULL</span>,
</span></span><span style=display:flex><span>    protocol TEXT <span style=color:#00f>NOT</span> <span style=color:#00f>NULL</span>,
</span></span><span style=display:flex><span>    container_ip TEXT <span style=color:#00f>NOT</span> <span style=color:#00f>NULL</span>,
</span></span><span style=display:flex><span>    container_port INTEGER <span style=color:#00f>NOT</span> <span style=color:#00f>NULL</span>,
</span></span><span style=display:flex><span>    <span style=color:#00f>FOREIGN</span> <span style=color:#00f>KEY</span> (container_id) <span style=color:#00f>REFERENCES</span> pods(container_id) <span style=color:#00f>ON</span> <span style=color:#00f>DELETE</span> <span style=color:#00f>CASCADE</span>,
</span></span><span style=display:flex><span>    <span style=color:#00f>UNIQUE</span> (host_ip, host_port, protocol) <span style=color:green>-- Unique constraint
</span></span></span><span style=display:flex><span><span style=color:green></span>);
</span></span></code></pre></div></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title="SIG Network mailing list" aria-label="SIG Network mailing list"><a target=_blank rel=noopener href=https://groups.google.com/forum/#!forum/kubernetes-sig-network aria-label="SIG Network mailing list"><i class="fa fa-envelope"></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/aojea/kindnet aria-label=GitHub><i class="fab fa-github"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Slack aria-label=Slack><a target=_blank rel=noopener href=https://kubernetes.slack.com/messages/sig-network aria-label=Slack><i class="fab fa-slack"></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2019&ndash;2024
<span class=td-footer__authors>Antonio Ojea | <a href=https://creativecommons.org/licenses/by/4.0>CC BY 4.0</a> |</span></span><span class=td-footer__all_rights_reserved>All Rights Reserved</span></div></div></div></footer></div><script src=/js/main.min.16f9f0d8582758d8f3de537487b4f86430198a918b4bb9765f895ef531e6f167.js integrity="sha256-Fvnw2FgnWNjz3lN0h7T4ZDAZipGLS7l2X4le9THm8Wc=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>